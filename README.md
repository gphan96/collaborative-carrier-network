# Generating bundle of transport request

## Generating special depot location

From a certain depot location of an carrier, all depot locations of other carrier within a certain radius is consider as a set of depot location.

A special depot location is generated by getting the mean value of all element in a set of depot location.

Higher tier of special depot location could be generated by forming all special depot location within a certain radius and getting the mean value of such set of special depot location. (Looping the generating function)

Generating function will loop until the number of special depot location is narrowed down under a certain threshhold.

The big radius set when generating special depot location will help faster to narrow down the number of depot location. The small one will help the bundle fitting more to the carrier.

## Bundle

A bundle with fixed size contains transport requests which make profit to a special depot location.

The number of transport requests in a bundle has to be equal or smaller than the size of bundle

A threshhold number of existing bundle is set. As long as the amount of bundle is smaller than the threshhold number, new bundle will be generated until unable to generate new one.

A bundle which contains only transport requests that are elements in another bundle (a bundle that is a subset of another bundle), will be deleted. New bundle will be generated based on another special depot location.

> <b>Example 1:</b> Bundle A = {R1, R2, R3} and Bundle B = {R2, R4, R5}, both bundle will stay existed.

> <b>Example 2:</b> Bundle A = {R1, R2} and Bundle B = {R1, R2, R4, R5}, Bundle A will be deleted, only Bundle B stay existed.

> <b>Tip:</b> Using containsAll() method.

## Generating bundle

* <b>Solution 1:</b> 
   * Requests have pickup location that within a certain radius from the special depot location are considered as set of high posibililty for that depot location. (Or maybe get the mean location between pickup and deliver location)
   * If the number of request in the bundle don't reach the max size of that bundle, the radius can be grown.

<p></p>

* <b>Solution 2:</b>
   * Randomly pick requests to form a bundle until the max size is reached.

## Profit calculation

A route is defined as from pickup location to deliver location.

The main profit is based on the differences between the earning per distance on a direct route with the cost per distance that carrier has to pay for travelling on actual route based on the tour generated.

In this situation, the fixed earning cost and loading/unloading cost is not necessary.

* All the request within a bundle has to make positive profit.
* The total revenue of that bundle based on the special depot location also has to be positive. (because the total revenue takes the whole tour length into accounting) ???

#
# How to decide which bundles gonna be sold

